{"ast":null,"code":"import axios from 'axios';\nexport default (async ({\n  query: {\n    id\n  }\n}, res) => {\n  let products = [];\n  await axios({\n    method: \"GET\",\n    url: 'https://api.bigcommerce.com/stores/5xucklva8y/v3/catalog/products',\n    headers: {\n      \"X-Auth-Client\": '4berj6c79aulu1fiqgeq3kupga0oe01',\n      \"X-Auth-Token\": '5xe20syvcw3l4oibycyeoj85ezsvaio'\n    }\n  }).then(response => products = response.data.data).then(filtered = products.filter(product => product.id === id));\n  console.log(products[0].id);\n  console.log(products[0].name); // const filtered = await products.filter(product => product.id === id)\n\n  console.log(filtered); // Product with id exists\n\n  if (filtered.length > 0) {\n    res.status(200).json(filtered[0]);\n  } else {\n    res.status(404).json({\n      message: `User with id: ${id} not found.`\n    });\n  }\n});","map":{"version":3,"sources":["/Users/duncan/Development/Repos/next-learn-demo/7.2-api-routes/pages/api/products2/[id].js"],"names":["axios","query","id","res","products","method","url","headers","then","response","data","filtered","filter","product","console","log","name","length","status","json","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,gBAAe,OAAO;AAAEC,EAAAA,KAAK,EAAE;AAAEC,IAAAA;AAAF;AAAT,CAAP,EAA0BC,GAA1B,KAAkC;AAE/C,MAAIC,QAAQ,GAAG,EAAf;AAEA,QAAMJ,KAAK,CACP;AACEK,IAAAA,MAAM,EAAE,KADV;AAEEC,IAAAA,GAAG,EAAE,mEAFP;AAGIC,IAAAA,OAAO,EAAE;AACP,uBAAiB,iCADV;AAEP,sBAAgB;AAFT;AAHb,GADO,CAAL,CAWDC,IAXC,CAWIC,QAAQ,IAAIL,QAAQ,GAAGK,QAAQ,CAACC,IAAT,CAAcA,IAXzC,EAYDF,IAZC,CAYIG,QAAQ,GAAGP,QAAQ,CAACQ,MAAT,CAAgBC,OAAO,IAAIA,OAAO,CAACX,EAAR,KAAeA,EAA1C,CAZf,CAAN;AAaIY,EAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAAC,CAAD,CAAR,CAAYF,EAAxB;AACAY,EAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAAC,CAAD,CAAR,CAAYY,IAAxB,EAlB2C,CAqB7C;;AACAF,EAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EAtB6C,CAwB/C;;AACA,MAAIA,QAAQ,CAACM,MAAT,GAAkB,CAAtB,EAAyB;AACvBd,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBR,QAAQ,CAAC,CAAD,CAA7B;AACD,GAFD,MAEO;AACLR,IAAAA,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAG,iBAAgBlB,EAAG;AAA/B,KAArB;AACD;AACF,CA9BD","sourcesContent":["import axios from 'axios'; \n\nexport default async ({ query: { id } }, res) => {\n\n  let products = [];\n\n  await axios(\n      {\n        method: \"GET\",\n        url: 'https://api.bigcommerce.com/stores/5xucklva8y/v3/catalog/products',\n          headers: {\n            \"X-Auth-Client\": '4berj6c79aulu1fiqgeq3kupga0oe01',\n            \"X-Auth-Token\": '5xe20syvcw3l4oibycyeoj85ezsvaio'\n          }\n      }\n      )\n\n      .then(response => products = response.data.data)\n      .then(filtered = products.filter(product => product.id === id))\n      console.log(products[0].id)\n      console.log(products[0].name)\n\n\n    // const filtered = await products.filter(product => product.id === id)\n    console.log(filtered)\n\n  // Product with id exists\n  if (filtered.length > 0) {\n    res.status(200).json(filtered[0])\n  } else {\n    res.status(404).json({ message: `User with id: ${id} not found.` })\n  }\n}"]},"metadata":{},"sourceType":"module"}